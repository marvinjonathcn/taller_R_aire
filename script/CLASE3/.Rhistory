# NUMERO ALEATORIO DE PUERTO
port <- as.integer(runif(1, min = 5000, max = 6000))
rD <- rsDriver(port = port, browser = "chrome",
chromever = "100.0.4896.60")
library(RSelenium)
port <- as.integer(runif(1, min = 5000, max = 6000))
rD <- rsDriver(port = port, browser = "chrome",
chromever = "100.0.4896.60")
binman::list_versions("chromedriver")
rD <- rsDriver(remoteServerAddr = "localhost",port = port, browser = "chrome",
chromever = "100.0.4896.60")
# EJECUTAMOS EL DRIVER DE GOOGLE CHROME
rD <- rsDriver(port = 4444L, browser = "chrome",
chromever = "100.0.4896.60")
library(ggplot2)
library(RSelenium)
library(DataExplorer)
library(tidyr)
library(RSelenium)
binman::list_versions("chromedriver")
# NUMERO ALEATORIO DE PUERTO
port <- as.integer(runif(1, min = 5000, max = 6000))
# EJECUTAMOS EL DRIVER DE GOOGLE CHROME
rD <- rsDriver(port = 4444L, browser = "chrome",
chromever = "100.0.4896.60")
rD <- rsDriver(port = port, browser = "chrome",
chromever = "100.0.4896.60")
library(RSelenium)
binman::list_versions("chromedriver")
download_senamhi_data <- function(url_list) {
# NUMERO ALEATORIO DE PUERTO
port <- as.integer(runif(1, min = 5000, max = 6000))
# EJECUTAMOS EL DRIVER DE GOOGLE CHROME
rD <- rsDriver(port = port, browser = "chrome",
chromever = "100.0.4896.60")
remDrv <- rD$client
for (url in url_list){
# INGRESAR AL URL
remDrv$navigate(url)
# ENCONTRAR EL BOTON DE DESCARGA
down_button <- remDrv$findElement(using = "id", "export2")
down_button$clickElement()
}
# CERRAR LA SESION ACTUAL
remDrv$close()
rD$server$stop()
rm(rD, remDrv)
gc()
}
# EJECUTAR LA FUNCION PARA DESCARGAR TODOS LOS MESES DE UN AÑO
list_url <- list()
for (i in 1:9) {
list_url[i] = paste("https://www.senamhi.gob.pe//mapas/mapa-estaciones-2/_dato_esta_tipo02.php?estaciones=112181&CBOFiltro=20200",
i, "&t_e=M&estado=AUTOMATICA&cod_old=&cate_esta=EMA&alt=117", sep = "")
}
for (i in 10:12) {
list_url[i] = paste("https://www.senamhi.gob.pe//mapas/mapa-estaciones-2/_dato_esta_tipo02.php?estaciones=112181&CBOFiltro=2020",
i, "&t_e=M&estado=AUTOMATICA&cod_old=&cate_esta=EMA&alt=117", sep = "")
}
download_senamhi_data(list_url)
library(RSelenium)
binman::list_versions("chromedriver")
download_senamhi_data <- function(url_list) {
# NUMERO ALEATORIO DE PUERTO
port <- as.integer(runif(1, min = 5000, max = 6000))
# EJECUTAMOS EL DRIVER DE GOOGLE CHROME
rD <- rsDriver(port = port, browser = "chrome",
chromever = "100.0.4896.60")
remDrv <- rD$client
for (url in url_list){
# INGRESAR AL URL
remDrv$navigate(url)
# ENCONTRAR EL BOTON DE DESCARGA
down_button <- remDrv$findElement(using = "id", "export2")
down_button$clickElement()
}
# CERRAR LA SESION ACTUAL
remDrv$close()
rD$server$stop()
rm(rD, remDrv)
gc()
}
list_url <- list()
for (i in 1:9) {
list_url[i] = paste("https://www.senamhi.gob.pe//mapas/mapa-estaciones-2/_dato_esta_tipo02.php?estaciones=112181&CBOFiltro=20200",
i, "&t_e=M&estado=AUTOMATICA&cod_old=&cate_esta=EMA&alt=117", sep = "")
}
for (i in 10:12) {
list_url[i] = paste("https://www.senamhi.gob.pe//mapas/mapa-estaciones-2/_dato_esta_tipo02.php?estaciones=112181&CBOFiltro=2020",
i, "&t_e=M&estado=AUTOMATICA&cod_old=&cate_esta=EMA&alt=117", sep = "")
}
download_senamhi_data(list_url)
# Para limpiar el workspace:
rm(list = ls())
###############
#  Paquetes   #
###############
library(ggplot2)
library(RSelenium)
library(DataExplorer)
library(tidyr)
# FIJAR EL DIRECTORIO DE TRABAJO
setwd("D:/PROYECTOS-R/taller_R_aire/script/CLASE3")
#######################
#  DESCARGA DE DATOS  #
#######################
# DEFINIR UNA FUNCION PARA LA DESCARGA DE DATOS
library(RSelenium)
binman::list_versions("chromedriver")
download_senamhi_data <- function(url_list) {
# NUMERO ALEATORIO DE PUERTO
port <- as.integer(runif(1, min = 5000, max = 6000))
# EJECUTAMOS EL DRIVER DE GOOGLE CHROME
rD <- rsDriver(port = port, browser = "chrome",
chromever = "100.0.4896.60")
remDrv <- rD$client
for (url in url_list){
# INGRESAR AL URL
remDrv$navigate(url)
# ENCONTRAR EL BOTON DE DESCARGA
down_button <- remDrv$findElement(using = "id", "export2")
down_button$clickElement()
}
# CERRAR LA SESION ACTUAL
remDrv$close()
rD$server$stop()
rm(rD, remDrv)
gc()
}
# EJECUTAR LA FUNCION PARA DESCARGAR TODOS LOS MESES DE UN AÑO
list_url <- list()
for (i in 1:9) {
list_url[i] = paste("https://www.senamhi.gob.pe//mapas/mapa-estaciones-2/_dato_esta_tipo02.php?estaciones=112181&CBOFiltro=20200",
i, "&t_e=M&estado=AUTOMATICA&cod_old=&cate_esta=EMA&alt=117", sep = "")
}
for (i in 10:12) {
list_url[i] = paste("https://www.senamhi.gob.pe//mapas/mapa-estaciones-2/_dato_esta_tipo02.php?estaciones=112181&CBOFiltro=2020",
i, "&t_e=M&estado=AUTOMATICA&cod_old=&cate_esta=EMA&alt=117", sep = "")
}
download_senamhi_data(list_url)
